# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
- main

jobs:
  job: Test with Python
    pool:
      vmImage: ubuntu-latest
    strategy:
      matrix:
        Python38:
          python.version: '3.8'
        Python39:
          python.version: '3.9'
        Python310:
          python.version: '3.10'

    steps:
    - task: UsePythonVersion@0
      displayName: 'Use Python $(python.version)'
      inputs:
          versionSpec: '$(python.version)'

    - script: pip install tox
      displayName: 'Install tox'

    - script: tox -e py
      displayName: 'Run tox'

  job: Test with Black
    pool:
      vmImage: ubuntu-latest
    steps:
    - script: pip install tox
      displayName: 'Install tox'

    -script: tox -e black
    displayName: 'Run tox black'    

  job: Test with Flake8
    pool:
      vmImage: ubuntu-latest
    steps:
    - script: pip install tox
      displayName: 'Install tox'

    -script: tox -e flake8
    displayName: 'Run tox flake8'    
